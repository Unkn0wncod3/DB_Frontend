<section class="intro">
  <h1>DB API Explorer</h1>
  <p>Basis-URL: <code>{{ baseUrl }}</code></p>
  <p>Konfiguriere den Pfad und optionale Daten, um direkt gegen deine Railway-API zu testen.</p>
</section>

<form class="api-form" [formGroup]="form" (ngSubmit)="submit()">
  <div class="field">
    <label for="method">HTTP-Methode</label>
    <select id="method" formControlName="method">
      <option *ngFor="let method of methods" [value]="method">{{ method }}</option>
    </select>
  </div>

  <div class="field">
    <label for="endpoint">Endpoint</label>
    <input id="endpoint" type="text" formControlName="endpoint" placeholder="/health" />
    <small>Pfad relativ zur Basis-URL.</small>
  </div>

  <div class="field" *ngIf="requiresBody()">
    <label for="body">Request Body (JSON)</label>
    <textarea id="body" rows="6" formControlName="body" placeholder="{&#10;  &quot;example&quot;: true&#10;}"></textarea>
  </div>

  <div class="field">
    <label for="headers">Header (JSON)</label>
    <textarea id="headers" rows="4" formControlName="headers" placeholder="{&#10;  &quot;Authorization&quot;: &quot;Bearer ...&quot;&#10;}"></textarea>
  </div>

  <button type="submit" [disabled]="isLoading()">Anfrage senden</button>
</form>

<section *ngIf="isLoading()" class="status status--info">
  <p>Request laeuft ...</p>
</section>

<section *ngIf="error()" class="status status--error">
  <h2>Fehler</h2>
  <p>{{ error() }}</p>
</section>

<section *ngIf="response() !== null && !error()" class="status status--success">
  <h2>Antwort</h2>
  <pre><code>{{ response() | json }}</code></pre>
</section>
